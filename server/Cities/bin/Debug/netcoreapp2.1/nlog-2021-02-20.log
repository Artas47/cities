2021-02-20 17:41:12.4680|INFO|Cities.Program|Initializing application...
2021-02-20 17:41:14.5163|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 2.1.14-servicing-32113 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-02-20 17:41:16.4742|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (98ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [CitiesDB] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2021-02-20 17:41:16.5422|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (65ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
DROP DATABASE [CitiesDB];
2021-02-20 17:41:26.9309|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (355ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
CREATE DATABASE [CitiesDB];
2021-02-20 17:41:27.0087|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (76ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [CitiesDB] SET READ_COMMITTED_SNAPSHOT ON;
END;
2021-02-20 17:41:27.0707|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (12ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2021-02-20 17:41:27.0806|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2021-02-20 17:41:27.0910|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2021-02-20 17:41:27.0910|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20210219214449_CitiesInitMigration'.
2021-02-20 17:41:27.1245|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Cities] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(30) NOT NULL,
    [Description] nvarchar(150) NULL,
    CONSTRAINT [PK_Cities] PRIMARY KEY ([Id])
);
2021-02-20 17:41:27.1245|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [PointsOfInterest] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(30) NOT NULL,
    [Description] nvarchar(150) NULL,
    [CityId] int NOT NULL,
    CONSTRAINT [PK_PointsOfInterest] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_PointsOfInterest_Cities_CityId] FOREIGN KEY ([CityId]) REFERENCES [Cities] ([Id]) ON DELETE CASCADE
);
2021-02-20 17:41:27.1503|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (18ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([Id], [Description], [Name])
VALUES (1, N'The one with that big park.', N'New York City');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2021-02-20 17:41:27.1607|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([Id], [Description], [Name])
VALUES (2, N'The one with the cathedral that was never really finished.', N'Antwerp');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2021-02-20 17:41:27.1730|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([Id], [Description], [Name])
VALUES (3, N'The one with that big tower.', N'Paris');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2021-02-20 17:41:27.1854|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (9ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'CityId', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[PointsOfInterest]'))
    SET IDENTITY_INSERT [PointsOfInterest] ON;
INSERT INTO [PointsOfInterest] ([Id], [CityId], [Description], [Name])
VALUES (1, 1, N'The most visited urban park in the United States.', N'Central Park'),
(2, 1, N'A 102-story skyscraper located in Midtown Manhattan.', N'Empire State Building'),
(3, 2, N'A Gothic style cathedral, conceived by architects Jan and Pieter Appelmans.', N'Cathedral'),
(4, 2, N'The the finest example of railway architecture in Belgium.', N'Antwerp Central Station'),
(5, 3, N'A wrought iron lattice tower on the Champ de Mars, named after engineer Gustave Eiffel.', N'Eiffel Tower'),
(6, 3, N'The world''s largest museum.', N'The Louvre');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'CityId', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[PointsOfInterest]'))
    SET IDENTITY_INSERT [PointsOfInterest] OFF;
2021-02-20 17:41:27.1854|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_PointsOfInterest_CityId] ON [PointsOfInterest] ([CityId]);
2021-02-20 17:41:27.1854|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20210219214449_CitiesInitMigration', N'2.1.14-servicing-32113');
2021-02-20 17:41:27.2965|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\ARTAS\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-02-20 17:41:27.8091|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request starting HTTP/1.1 GET http://localhost:61365/  
2021-02-20 17:41:27.8091|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request starting HTTP/1.1 DEBUG http://localhost:61365/  0
2021-02-20 17:41:27.8894|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request finished in 79.711ms 200 
2021-02-20 17:41:28.0517|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request finished in 242.4084ms 404 text/plain
2021-02-20 17:41:28.4626|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request starting HTTP/1.1 GET http://localhost:61365/favicon.ico  
2021-02-20 17:41:28.4667|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request finished in 2.55ms 404 text/plain
2021-02-20 17:41:31.4020|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request starting HTTP/1.1 GET http://localhost:61365/api/cities  
2021-02-20 17:41:31.4416|INFO|Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker|Route matched with {action = "GetCities", controller = "Cities"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetCities() on controller Cities.API.Controllers.CitiesController (Cities).
2021-02-20 17:41:31.4570|INFO|Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker|Executed action Cities.API.Controllers.CitiesController.GetCities (Cities) in 8.7236ms
2021-02-20 17:41:31.5150|ERROR|Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware|An unhandled exception has occurred while executing the request.
2021-02-20 17:41:31.5804|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request finished in 177.8171ms 500 text/html; charset=utf-8
2021-02-20 18:04:24.1014|INFO|Cities.Program|Initializing application...
2021-02-20 18:04:25.4716|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 2.1.14-servicing-32113 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-02-20 18:04:26.8158|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [CitiesDB] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2021-02-20 18:04:26.8550|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (31ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
DROP DATABASE [CitiesDB];
2021-02-20 18:04:37.1877|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (282ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
CREATE DATABASE [CitiesDB];
2021-02-20 18:04:37.2501|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (60ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [CitiesDB] SET READ_COMMITTED_SNAPSHOT ON;
END;
2021-02-20 18:04:37.3041|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (10ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2021-02-20 18:04:37.3092|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2021-02-20 18:04:37.3092|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2021-02-20 18:04:37.3263|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20210219214449_CitiesInitMigration'.
2021-02-20 18:04:37.3451|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Cities] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(30) NOT NULL,
    [Description] nvarchar(150) NULL,
    CONSTRAINT [PK_Cities] PRIMARY KEY ([Id])
);
2021-02-20 18:04:37.3451|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [PointsOfInterest] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(30) NOT NULL,
    [Description] nvarchar(150) NULL,
    [CityId] int NOT NULL,
    CONSTRAINT [PK_PointsOfInterest] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_PointsOfInterest_Cities_CityId] FOREIGN KEY ([CityId]) REFERENCES [Cities] ([Id]) ON DELETE CASCADE
);
2021-02-20 18:04:37.3722|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (18ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([Id], [Description], [Name])
VALUES (1, N'The one with that big park.', N'New York City');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2021-02-20 18:04:37.3722|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([Id], [Description], [Name])
VALUES (2, N'The one with the cathedral that was never really finished.', N'Antwerp');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2021-02-20 18:04:37.3879|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([Id], [Description], [Name])
VALUES (3, N'The one with that big tower.', N'Paris');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2021-02-20 18:04:37.3879|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (9ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'CityId', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[PointsOfInterest]'))
    SET IDENTITY_INSERT [PointsOfInterest] ON;
INSERT INTO [PointsOfInterest] ([Id], [CityId], [Description], [Name])
VALUES (1, 1, N'The most visited urban park in the United States.', N'Central Park'),
(2, 1, N'A 102-story skyscraper located in Midtown Manhattan.', N'Empire State Building'),
(3, 2, N'A Gothic style cathedral, conceived by architects Jan and Pieter Appelmans.', N'Cathedral'),
(4, 2, N'The the finest example of railway architecture in Belgium.', N'Antwerp Central Station'),
(5, 3, N'A wrought iron lattice tower on the Champ de Mars, named after engineer Gustave Eiffel.', N'Eiffel Tower'),
(6, 3, N'The world''s largest museum.', N'The Louvre');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'CityId', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[PointsOfInterest]'))
    SET IDENTITY_INSERT [PointsOfInterest] OFF;
2021-02-20 18:04:37.4034|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_PointsOfInterest_CityId] ON [PointsOfInterest] ([CityId]);
2021-02-20 18:04:37.4034|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20210219214449_CitiesInitMigration', N'2.1.14-servicing-32113');
2021-02-20 18:04:37.4842|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\ARTAS\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-02-20 18:04:37.9951|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request starting HTTP/1.1 DEBUG http://localhost:61365/  0
2021-02-20 18:04:37.9951|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request starting HTTP/1.1 GET http://localhost:61365/  
2021-02-20 18:04:38.0417|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request finished in 48.5602ms 200 
2021-02-20 18:04:38.1594|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request finished in 165.9839ms 404 text/plain
2021-02-20 18:04:41.7854|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request starting HTTP/1.1 GET http://localhost:61365/api/cities  
2021-02-20 18:04:41.8853|INFO|Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker|Route matched with {action = "GetCities", controller = "Cities"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetCities() on controller Cities.Controllers.CitiesController (Cities).
2021-02-20 18:04:41.8955|INFO|Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker|Executed action Cities.Controllers.CitiesController.GetCities (Cities) in 4.8318ms
2021-02-20 18:04:41.9285|ERROR|Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware|An unhandled exception has occurred while executing the request.
2021-02-20 18:04:41.9682|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request finished in 181.5375ms 500 text/html; charset=utf-8
2021-02-20 18:20:21.9806|INFO|Cities.Program|Initializing application...
2021-02-20 18:20:24.5082|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 2.1.14-servicing-32113 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-02-20 18:20:25.6004|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [CitiesDB] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2021-02-20 18:20:25.6299|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (20ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
DROP DATABASE [CitiesDB];
2021-02-20 18:20:36.0179|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (357ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
CREATE DATABASE [CitiesDB];
2021-02-20 18:20:36.0922|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (71ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [CitiesDB] SET READ_COMMITTED_SNAPSHOT ON;
END;
2021-02-20 18:20:36.1409|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2021-02-20 18:20:36.1409|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2021-02-20 18:20:36.1409|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2021-02-20 18:20:36.1553|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20210219214449_CitiesInitMigration'.
2021-02-20 18:20:36.1731|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Cities] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(30) NOT NULL,
    [Description] nvarchar(150) NULL,
    CONSTRAINT [PK_Cities] PRIMARY KEY ([Id])
);
2021-02-20 18:20:36.1731|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [PointsOfInterest] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(30) NOT NULL,
    [Description] nvarchar(150) NULL,
    [CityId] int NOT NULL,
    CONSTRAINT [PK_PointsOfInterest] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_PointsOfInterest_Cities_CityId] FOREIGN KEY ([CityId]) REFERENCES [Cities] ([Id]) ON DELETE CASCADE
);
2021-02-20 18:20:36.1973|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (17ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([Id], [Description], [Name])
VALUES (1, N'The one with that big park.', N'New York City');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2021-02-20 18:20:36.2058|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([Id], [Description], [Name])
VALUES (2, N'The one with the cathedral that was never really finished.', N'Antwerp');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2021-02-20 18:20:36.2058|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([Id], [Description], [Name])
VALUES (3, N'The one with that big tower.', N'Paris');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2021-02-20 18:20:36.2247|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'CityId', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[PointsOfInterest]'))
    SET IDENTITY_INSERT [PointsOfInterest] ON;
INSERT INTO [PointsOfInterest] ([Id], [CityId], [Description], [Name])
VALUES (1, 1, N'The most visited urban park in the United States.', N'Central Park'),
(2, 1, N'A 102-story skyscraper located in Midtown Manhattan.', N'Empire State Building'),
(3, 2, N'A Gothic style cathedral, conceived by architects Jan and Pieter Appelmans.', N'Cathedral'),
(4, 2, N'The the finest example of railway architecture in Belgium.', N'Antwerp Central Station'),
(5, 3, N'A wrought iron lattice tower on the Champ de Mars, named after engineer Gustave Eiffel.', N'Eiffel Tower'),
(6, 3, N'The world''s largest museum.', N'The Louvre');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'CityId', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[PointsOfInterest]'))
    SET IDENTITY_INSERT [PointsOfInterest] OFF;
2021-02-20 18:20:36.2247|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_PointsOfInterest_CityId] ON [PointsOfInterest] ([CityId]);
2021-02-20 18:20:36.2329|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20210219214449_CitiesInitMigration', N'2.1.14-servicing-32113');
2021-02-20 18:20:36.2728|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\ARTAS\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-02-20 18:20:36.6608|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request starting HTTP/1.1 GET http://localhost:61365/  
2021-02-20 18:20:36.6608|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request starting HTTP/1.1 DEBUG http://localhost:61365/  0
2021-02-20 18:20:36.6812|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request finished in 44.4051ms 200 
2021-02-20 18:20:36.7407|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request finished in 104.6422ms 404 text/plain
2021-02-20 18:20:43.9955|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request starting HTTP/1.1 GET http://localhost:61365/api/cities  
2021-02-20 18:20:44.0199|INFO|Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker|Route matched with {action = "GetCities", controller = "Cities"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetCities() on controller Cities.Controllers.CitiesController (Cities).
2021-02-20 18:20:44.0934|INFO|Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker|Executing action method Cities.Controllers.CitiesController.GetCities (Cities) - Validation state: Valid
2021-02-20 18:20:44.0934|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 2.1.14-servicing-32113 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-02-20 18:20:44.1903|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[Description], [c].[Name]
FROM [Cities] AS [c]
ORDER BY [c].[Name]
2021-02-20 18:25:08.3232|INFO|Cities.Program|Initializing application...
2021-02-20 18:25:10.4542|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 2.1.14-servicing-32113 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-02-20 18:25:13.6146|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3,005ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [CitiesDB] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2021-02-20 18:25:13.6511|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (33ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
DROP DATABASE [CitiesDB];
2021-02-20 18:25:24.0173|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (329ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
CREATE DATABASE [CitiesDB];
2021-02-20 18:25:24.0853|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (65ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [CitiesDB] SET READ_COMMITTED_SNAPSHOT ON;
END;
2021-02-20 18:25:24.1335|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2021-02-20 18:25:24.1376|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2021-02-20 18:25:24.1376|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2021-02-20 18:25:24.1532|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20210219214449_CitiesInitMigration'.
2021-02-20 18:25:24.1716|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Cities] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(30) NOT NULL,
    [Description] nvarchar(150) NULL,
    CONSTRAINT [PK_Cities] PRIMARY KEY ([Id])
);
2021-02-20 18:25:24.1716|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [PointsOfInterest] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(30) NOT NULL,
    [Description] nvarchar(150) NULL,
    [CityId] int NOT NULL,
    CONSTRAINT [PK_PointsOfInterest] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_PointsOfInterest_Cities_CityId] FOREIGN KEY ([CityId]) REFERENCES [Cities] ([Id]) ON DELETE CASCADE
);
2021-02-20 18:25:24.1886|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (11ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([Id], [Description], [Name])
VALUES (1, N'The one with that big park.', N'New York City');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2021-02-20 18:25:24.1886|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([Id], [Description], [Name])
VALUES (2, N'The one with the cathedral that was never really finished.', N'Antwerp');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2021-02-20 18:25:24.2070|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([Id], [Description], [Name])
VALUES (3, N'The one with that big tower.', N'Paris');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2021-02-20 18:25:24.2189|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (9ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'CityId', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[PointsOfInterest]'))
    SET IDENTITY_INSERT [PointsOfInterest] ON;
INSERT INTO [PointsOfInterest] ([Id], [CityId], [Description], [Name])
VALUES (1, 1, N'The most visited urban park in the United States.', N'Central Park'),
(2, 1, N'A 102-story skyscraper located in Midtown Manhattan.', N'Empire State Building'),
(3, 2, N'A Gothic style cathedral, conceived by architects Jan and Pieter Appelmans.', N'Cathedral'),
(4, 2, N'The the finest example of railway architecture in Belgium.', N'Antwerp Central Station'),
(5, 3, N'A wrought iron lattice tower on the Champ de Mars, named after engineer Gustave Eiffel.', N'Eiffel Tower'),
(6, 3, N'The world''s largest museum.', N'The Louvre');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'CityId', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[PointsOfInterest]'))
    SET IDENTITY_INSERT [PointsOfInterest] OFF;
2021-02-20 18:25:24.2189|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_PointsOfInterest_CityId] ON [PointsOfInterest] ([CityId]);
2021-02-20 18:25:24.2189|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20210219214449_CitiesInitMigration', N'2.1.14-servicing-32113');
2021-02-20 18:25:24.2638|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\ARTAS\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-02-20 18:25:24.7913|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request starting HTTP/1.1 GET http://localhost:61365/  
2021-02-20 18:25:24.7913|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request starting HTTP/1.1 DEBUG http://localhost:61365/  0
2021-02-20 18:25:24.8108|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request finished in 20.6176ms 200 
2021-02-20 18:25:24.8705|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request finished in 81.6124ms 404 text/plain
2021-02-20 18:25:30.5538|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request starting HTTP/1.1 GET http://localhost:61365/api/cities  
2021-02-20 18:25:30.5768|INFO|Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker|Route matched with {action = "GetCities", controller = "Cities"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetCities() on controller Cities.Controllers.CitiesController (Cities).
2021-02-20 18:25:30.8803|INFO|Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker|Executing action method Cities.Controllers.CitiesController.GetCities (Cities) - Validation state: Valid
2021-02-20 18:25:30.8897|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 2.1.14-servicing-32113 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-02-20 18:25:30.9551|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[Description], [c].[Name]
FROM [Cities] AS [c]
ORDER BY [c].[Name]
2021-02-20 18:25:30.9892|INFO|Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker|Executed action method Cities.Controllers.CitiesController.GetCities (Cities), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 104.0984ms.
2021-02-20 18:25:30.9989|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[Cities.Models.CityWithoutPointsOfInterestDto, Cities, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2021-02-20 18:25:31.0602|INFO|Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker|Executed action Cities.Controllers.CitiesController.GetCities (Cities) in 477.1795ms
2021-02-20 18:25:31.0602|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request finished in 519.1628ms 200 application/json; charset=utf-8
2021-02-20 18:25:36.3849|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request starting HTTP/1.1 GET http://localhost:61365/api/cities/1  
2021-02-20 18:25:36.4015|INFO|Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker|Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetCity(Int32, Boolean) on controller Cities.Controllers.CitiesController (Cities).
2021-02-20 18:25:36.4204|INFO|Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker|Executing action method Cities.Controllers.CitiesController.GetCity (Cities) - Validation state: Valid
2021-02-20 18:25:36.4204|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 2.1.14-servicing-32113 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-02-20 18:25:36.4574|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[Description], [c].[Name]
FROM [Cities] AS [c]
WHERE [c].[Id] = @__cityId_0
2021-02-20 18:25:36.4654|INFO|Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker|Executed action method Cities.Controllers.CitiesController.GetCity (Cities), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 42.7845ms.
2021-02-20 18:25:36.4654|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'Cities.Models.CityWithoutPointsOfInterestDto'.
2021-02-20 18:25:36.4654|INFO|Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker|Executed action Cities.Controllers.CitiesController.GetCity (Cities) in 67.0119ms
2021-02-20 18:25:36.4654|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request finished in 90.4364ms 200 application/json; charset=utf-8
2021-02-20 18:25:52.0052|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request starting HTTP/1.1 GET http://localhost:61365/api/cities/1?includepointsofinterest=true  
2021-02-20 18:25:52.0157|INFO|Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker|Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetCity(Int32, Boolean) on controller Cities.Controllers.CitiesController (Cities).
2021-02-20 18:25:52.0157|INFO|Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker|Executing action method Cities.Controllers.CitiesController.GetCity (Cities) - Validation state: Valid
2021-02-20 18:25:52.0157|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 2.1.14-servicing-32113 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-02-20 18:25:52.0759|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[Description], [c].[Name]
FROM [Cities] AS [c]
WHERE [c].[Id] = @__cityId_0
ORDER BY [c].[Id]
2021-02-20 18:25:52.0759|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [c.PointsOfInterest].[Id], [c.PointsOfInterest].[CityId], [c.PointsOfInterest].[Description], [c.PointsOfInterest].[Name]
FROM [PointsOfInterest] AS [c.PointsOfInterest]
INNER JOIN (
    SELECT TOP(1) [c0].[Id]
    FROM [Cities] AS [c0]
    WHERE [c0].[Id] = @__cityId_0
    ORDER BY [c0].[Id]
) AS [t] ON [c.PointsOfInterest].[CityId] = [t].[Id]
ORDER BY [t].[Id]
2021-02-20 18:25:52.1037|INFO|Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker|Executed action method Cities.Controllers.CitiesController.GetCity (Cities), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 80.0957ms.
2021-02-20 18:25:52.1058|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'Cities.Models.CityDto'.
2021-02-20 18:25:52.1058|INFO|Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker|Executed action Cities.Controllers.CitiesController.GetCity (Cities) in 94.2673ms
2021-02-20 18:25:52.1058|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request finished in 112.1693ms 200 application/json; charset=utf-8
2021-02-20 18:29:34.4207|INFO|Cities.Program|Initializing application...
2021-02-20 18:29:36.3833|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 2.1.14-servicing-32113 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-02-20 18:29:36.5813|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [CitiesDB] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2021-02-20 18:29:36.6000|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (16ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
DROP DATABASE [CitiesDB];
2021-02-20 18:29:47.0154|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (361ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
CREATE DATABASE [CitiesDB];
2021-02-20 18:29:47.0801|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (61ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [CitiesDB] SET READ_COMMITTED_SNAPSHOT ON;
END;
2021-02-20 18:29:47.1288|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2021-02-20 18:29:47.1288|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2021-02-20 18:29:47.1288|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2021-02-20 18:29:47.1436|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20210219214449_CitiesInitMigration'.
2021-02-20 18:29:47.1606|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Cities] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(30) NOT NULL,
    [Description] nvarchar(150) NULL,
    CONSTRAINT [PK_Cities] PRIMARY KEY ([Id])
);
2021-02-20 18:29:47.1606|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [PointsOfInterest] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(30) NOT NULL,
    [Description] nvarchar(150) NULL,
    [CityId] int NOT NULL,
    CONSTRAINT [PK_PointsOfInterest] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_PointsOfInterest_Cities_CityId] FOREIGN KEY ([CityId]) REFERENCES [Cities] ([Id]) ON DELETE CASCADE
);
2021-02-20 18:29:47.1769|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (10ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([Id], [Description], [Name])
VALUES (1, N'The one with that big park.', N'New York City');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2021-02-20 18:29:47.1851|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([Id], [Description], [Name])
VALUES (2, N'The one with the cathedral that was never really finished.', N'Antwerp');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2021-02-20 18:29:47.1851|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([Id], [Description], [Name])
VALUES (3, N'The one with that big tower.', N'Paris');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2021-02-20 18:29:47.2038|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'CityId', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[PointsOfInterest]'))
    SET IDENTITY_INSERT [PointsOfInterest] ON;
INSERT INTO [PointsOfInterest] ([Id], [CityId], [Description], [Name])
VALUES (1, 1, N'The most visited urban park in the United States.', N'Central Park'),
(2, 1, N'A 102-story skyscraper located in Midtown Manhattan.', N'Empire State Building'),
(3, 2, N'A Gothic style cathedral, conceived by architects Jan and Pieter Appelmans.', N'Cathedral'),
(4, 2, N'The the finest example of railway architecture in Belgium.', N'Antwerp Central Station'),
(5, 3, N'A wrought iron lattice tower on the Champ de Mars, named after engineer Gustave Eiffel.', N'Eiffel Tower'),
(6, 3, N'The world''s largest museum.', N'The Louvre');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'CityId', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[PointsOfInterest]'))
    SET IDENTITY_INSERT [PointsOfInterest] OFF;
2021-02-20 18:29:47.2038|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_PointsOfInterest_CityId] ON [PointsOfInterest] ([CityId]);
2021-02-20 18:29:47.2038|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20210219214449_CitiesInitMigration', N'2.1.14-servicing-32113');
2021-02-20 18:29:47.2508|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\ARTAS\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-02-20 18:29:47.6589|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request starting HTTP/1.1 GET http://localhost:61365/  
2021-02-20 18:29:47.6589|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request starting HTTP/1.1 DEBUG http://localhost:61365/  0
2021-02-20 18:29:47.6829|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request finished in 51.607ms 200 
2021-02-20 18:29:47.7474|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request finished in 119.0122ms 404 text/plain
2021-02-20 18:29:54.7575|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request starting HTTP/1.1 GET http://localhost:61365/api/cities  
2021-02-20 18:29:54.7831|INFO|Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker|Route matched with {action = "GetCities", controller = "Cities"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetCities() on controller Cities.Controllers.CitiesController (Cities).
2021-02-20 18:29:55.0655|INFO|Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker|Executing action method Cities.Controllers.CitiesController.GetCities (Cities) - Validation state: Valid
2021-02-20 18:29:55.0655|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 2.1.14-servicing-32113 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-02-20 18:29:55.1420|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[Description], [c].[Name]
FROM [Cities] AS [c]
ORDER BY [c].[Name]
2021-02-20 18:29:55.1771|INFO|Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker|Executed action method Cities.Controllers.CitiesController.GetCities (Cities), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 106.0145ms.
2021-02-20 18:29:55.1874|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[Cities.Models.CityWithoutPointsOfInterestDto, Cities, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2021-02-20 18:29:55.2403|INFO|Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker|Executed action Cities.Controllers.CitiesController.GetCities (Cities) in 448.4753ms
2021-02-20 18:29:55.2745|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request finished in 497.2222ms 200 application/json; charset=utf-8
2021-02-20 18:30:01.9174|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request starting HTTP/1.1 GET http://localhost:61365/api/cities/1/pointsofinterest  
2021-02-20 18:30:01.9342|INFO|Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker|Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetPointsOfInterest(Int32) on controller Cities.Controllers.PointsOfInterestController (Cities).
2021-02-20 18:30:01.9523|INFO|Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker|Executing action method Cities.Controllers.PointsOfInterestController.GetPointsOfInterest (Cities) - Validation state: Valid
2021-02-20 18:30:01.9523|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 2.1.14-servicing-32113 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-02-20 18:30:01.9909|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Cities] AS [c]
        WHERE [c].[Id] = @__cityId_0)
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END
2021-02-20 18:30:02.0024|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [p].[Id], [p].[CityId], [p].[Description], [p].[Name]
FROM [PointsOfInterest] AS [p]
WHERE [p].[CityId] = @__cityId_0
2021-02-20 18:30:02.0024|INFO|Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker|Executed action method Cities.Controllers.PointsOfInterestController.GetPointsOfInterest (Cities), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 56.1032ms.
2021-02-20 18:30:02.0140|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[Cities.Models.PointOfInterestDto, Cities, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2021-02-20 18:30:02.0140|INFO|Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker|Executed action Cities.Controllers.PointsOfInterestController.GetPointsOfInterest (Cities) in 81.8676ms
2021-02-20 18:30:02.0140|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request finished in 104.7662ms 200 application/json; charset=utf-8
2021-02-20 18:30:07.1733|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request starting HTTP/1.1 GET http://localhost:61365/api/cities/1/pointsofinterest/1  
2021-02-20 18:30:07.1733|INFO|Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker|Route matched with {action = "GetPointOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetPointOfInterest(Int32, Int32) on controller Cities.Controllers.PointsOfInterestController (Cities).
2021-02-20 18:30:07.1896|INFO|Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker|Executing action method Cities.Controllers.PointsOfInterestController.GetPointOfInterest (Cities) - Validation state: Valid
2021-02-20 18:30:07.1896|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 2.1.14-servicing-32113 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-02-20 18:30:07.2086|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Cities] AS [c]
        WHERE [c].[Id] = @__cityId_0)
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END
2021-02-20 18:30:07.2295|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@__cityId_0='?' (DbType = Int32), @__pointOfInterestId_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[CityId], [p].[Description], [p].[Name]
FROM [PointsOfInterest] AS [p]
WHERE ([p].[CityId] = @__cityId_0) AND ([p].[Id] = @__pointOfInterestId_1)
2021-02-20 18:30:07.2414|INFO|Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker|Executed action method Cities.Controllers.PointsOfInterestController.GetPointOfInterest (Cities), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 44.7732ms.
2021-02-20 18:30:07.2414|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'Cities.Models.PointOfInterestDto'.
2021-02-20 18:30:07.2500|INFO|Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker|Executed action Cities.Controllers.PointsOfInterestController.GetPointOfInterest (Cities) in 66.3835ms
2021-02-20 18:30:07.2500|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request finished in 82.343ms 200 application/json; charset=utf-8
